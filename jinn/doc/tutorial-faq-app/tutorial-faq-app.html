<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<meta name="GENERATOR" content="TtH 3.67">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
 



 
<title> JiNN FAQ Database Administration</title>
 
<h1 align="center">JiNN FAQ Database Administration </h1>

<div class="p"><!----></div>

<h3 align="center">27 December 2006 </h3>

<div class="p"><!----></div>

<h3 align="center">Pim Snel </h3>

<div class="p"><!----></div>

<h2> Abstract</h2>
This tutorial learns to create a small admin interface for an external
F.A.Q. database using JiNN. 

<div class="p"><!----></div>
 <h2><a name="tth_sEc1">
1</a>&nbsp;&nbsp;Introduction</h2>

<div class="p"><!----></div>
In this tutorial we're going to create an administration back-end
using JiNN. The front-end of the F.A.Q. Application can not be created
with JiNN. This should be written from scratch or using other tools.
JiNN's purpose is to quickly give normal user access to a database
without the need of writing code. Creating a complete full featured
F.A.Q. application is outside the scope of this tutorial.

<div class="p"><!----></div>
The intended audience are web-developers who make extensive use of
databases. Basic knowledge of eGroupWare and MySQL is required. You
need administrator access to an eGroupWare environment with JiNN installed.

<div class="p"><!----></div>
 <h2><a name="tth_sEc2">
2</a>&nbsp;&nbsp;Words you need to understand</h2>

<div class="p"><!----></div>
You need to understand two important words used in JiNN. 

<div class="p"><!----></div>

<ol type="1">
<li> <em>JiNN-sites</em> or just <em>sites</em> do NOT mean website but. A
JiNN-site contains database connection information and it contains
JiNN-objects. A JiNN-site can be seen as a single application in a
framework containing more applications, or as a single database next
to other databases.
<div class="p"><!----></div>
</li>

<li> <em>JiNN-objects</em> are assigned to table. A JiNN object automatically
contains a <em>form view</em> and a <em>list view</em>. JiNN-objects can
be seen as sections in an application or as tables in a database.
<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
 <h2><a name="tth_sEc3">
3</a>&nbsp;&nbsp;Setup the database</h2>

<div class="p"><!----></div>
Before we can create a JiNN-site a database with tables must exist.
We create a database for the F.A.Q. application in MySQL using the
following schema:

<div class="p"><!----></div>

<dl compact="compact">
 <dt><b></b></dt>
	<dd>
CREATE&nbsp;TABLE&nbsp;`category`&nbsp;(

<div class="p"><!----></div>
&nbsp;&nbsp;`id_cat`&nbsp;int(4)&nbsp;NOT&nbsp;NULL&nbsp;auto_increment,

<div class="p"><!----></div>
`cat_name`&nbsp;varchar(30)&nbsp;NOT&nbsp;NULL&nbsp;default&nbsp;",

<div class="p"><!----></div>
PRIMARY&nbsp;KEY&nbsp;&nbsp;(`id_cat`)

<div class="p"><!----></div>
)&nbsp;ENGINE=MyISAM&nbsp;DEFAULT&nbsp;CHARSET=latin1&nbsp;AUTO_INCREMENT=1&nbsp;;

<div class="p"><!----></div>
CREATE&nbsp;TABLE&nbsp;`questions_answers`&nbsp;(

<div class="p"><!----></div>
&nbsp;&nbsp;`id`&nbsp;int(4)&nbsp;NOT&nbsp;NULL&nbsp;auto_increment,

<div class="p"><!----></div>
&nbsp;&nbsp;`cat_id`&nbsp;int(4)&nbsp;NOT&nbsp;NULL&nbsp;default&nbsp;'0',

<div class="p"><!----></div>
&nbsp;&nbsp;`question`&nbsp;varchar(250)&nbsp;NOT&nbsp;NULL&nbsp;default&nbsp;",

<div class="p"><!----></div>
&nbsp;&nbsp;`answer`&nbsp;longtext&nbsp;NOT&nbsp;NULL,

<div class="p"><!----></div>
&nbsp;&nbsp;PRIMARY&nbsp;KEY&nbsp;&nbsp;(`id`)

<div class="p"><!----></div>
)&nbsp;ENGINE=MyISAM&nbsp;DEFAULT&nbsp;CHARSET=latin1&nbsp;AUTO_INCREMENT=1&nbsp;;
</dd>
</dl>
As you can see the question can be put into categories using a foreign
key. 

<div class="p"><!----></div>
 <h2><a name="tth_sEc4">
4</a>&nbsp;&nbsp;Creating the JiNN-Site</h2>

<div class="p"><!----></div>
Log into your eGroupWare environment and open JiNN. Make sure your
are administrator. You may have to give yourself permission to use
JiNN in the eGroupWare Admin Application. Because you are an administrator
you have an extra <em>admin site box menu</em> in JiNN's sidebox.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg1">
</a> 

<div class="p"><!----></div>
<center>Figure 1: JiNN Sidebox menu with Administration box</center>

<div class="p"><!----></div>
Click on the link <em>Add Site</em> from the sidebox menu. You must
now define the database connection and the name of your JiNN-site.
Do at as in the image below.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg2">
</a> 

<div class="p"><!----></div>
<center>Figure 2: JiNN-Site settings containing database connection information</center>

<div class="p"><!----></div>
Before saving you can test your connection by clicking on the button
test database and paths. In our example the database connection must
succeed but the path and URL will give errors. This is nothing to
worry about for this tutorial. When database connection was successful
you can save the site, else check the database connection settings.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg3">
</a> 

<div class="p"><!----></div>
<center>Figure 3: Testing the database connection</center>

<div class="p"><!----></div>
 <h2><a name="tth_sEc5">
5</a>&nbsp;&nbsp;Adding Objects</h2>

<div class="p"><!----></div>
When the JiNN-site is saved, the database connection is working and
there are tables in the database, we can setup the JiNN-objects. After
saving a new site the Site Settings Page is still opened. At the bottom
of this page the site objects are displayed. We haven't made any yet,
so lets add an object: click the button <em>New Object</em>.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg4">
</a> 

<div class="p"><!----></div>
<center>Figure 4: JiNN-objects listed at the bottom of the Site Settings Page</center>

<div class="p"><!----></div>
The object properties window will open. You must give this object
a name and assign a database table from the dropdown list. We will
name the first object `Categories' and assign this to the categories
table. Repeat this steps for the object `Questions &amp; Answers'.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg5">
</a> 

<div class="p"><!----></div>
<center>Figure 5: Creating a JiNN-object</center>

<div class="p"><!----></div>
 <h2><a name="tth_sEc6">
6</a>&nbsp;&nbsp;Adding the first content </h2>

<div class="p"><!----></div>
Though we're not finished yet we can already use these objects for
maintaining content. Lets have a look at the categories first. Before
we can access our object we open our JiNN-site. Select the Site in
the JiNN Nagivation in the Sidebox.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg6">
</a> 

<div class="p"><!----></div>
<center>Figure 6: Opening a JiNN-site</center>

<div class="p"><!----></div>
When the site is opened the active objects are listed in the JiNN
Navigator. We will now select the object `Categories'.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg7">
</a> 

<div class="p"><!----></div>
<center>Figure 7: Selecting an object</center>

<div class="p"><!----></div>
JiNN will now open the categories in the Listview showing no records.
Lets create a new record by clicking on Add new record.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg8">
</a> 

<div class="p"><!----></div>
<center>Figure 8: List View of the newly create object Categories</center>

<div class="p"><!----></div>
Add a category and click on save. 

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg9">
</a> 

<div class="p"><!----></div>
<center>Figure 9: Adding new record</center>

<div class="p"><!----></div>
After the record is saved we will return in the last added record
and on top of the page the message 'Record was succesfully saved'
is displayed. Lets add another by clicking on new record(s) from sidebox
menu. 

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg10">
</a> 

<div class="p"><!----></div>
<center>Figure 10: Record saved successfully</center>

<div class="p"><!----></div>
When you're done click on Save and finish. You will now return to
the list view which will show your records. Every record can be viewed,
edited, copied or deleted by using these small icons.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg11">
</a> 

<div class="p"><!----></div>
<center>Figure 11: icons to maintain records</center>

<div class="p"><!----></div>
 <h2><a name="tth_sEc7">
7</a>&nbsp;&nbsp;Adding relations and changing labels</h2>

<div class="p"><!----></div>
We now want to create the relation between <em>category.id_cat</em>
and <em>questions_answers.cat_id</em>. After we have create this relation
we can assign a category to a <em>Question and Answer</em> using a dropdown
list.

<div class="p"><!----></div>
Click on the object <em>Questions and Answers</em> from the JiNN Navigation
and then click on <em>Edit Object Form View</em> from the administration
sidebox menu

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg12">
</a> 

<div class="p"><!----></div>
<center>Figure 12: open design form</center>

<div class="p"><!----></div>
You will now see the developers mode of the form view which is one
of JiNN's most important and powerfull screens. On top of the form
you see a horizontal bar with configuration buttons for concerning
the complete object. On the left side you'll see buttons and icons
per field to configure every field. 

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg13">
</a> 

<div class="p"><!----></div>
<center>Figure 13: developer toolbar</center>

<div class="p"><!----></div>
Click on the button Relation Widgets. The relation editor will be
openen in a plugin. You can create different relation types, displayed
in the tabs. We're going to create a <em>One-to-many relation</em> widget
in this form which is the first tab. Click on the the button <em>Create
new relation</em>.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg14">
</a> 

<div class="p"><!----></div>
<center>Figure 14: create new relation</center>

<div class="p"><!----></div>
Then select keys, tables and fields like in the example below.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg15">
</a> 

<div class="p"><!----></div>
<center>Figure 15: relation editor</center>

<div class="p"><!----></div>
Click on save when your finished. The new relation is displayed as
in the image below:

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg16">
</a> 

<div class="p"><!----></div>
<center>Figure 16: save relation in relation editor</center>

<div class="p"><!----></div>
If this seems good click on close to close the popup. You will now
see that the field cat id has a dropdown list containing our category
names. 

<div class="p"><!----></div>
To finish our work we will edit the default label into Category. Click
on the edit field symbol left from the cat id field. 

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg17">
</a> 

<div class="p"><!----></div>
<center>Figure 17: edit field button</center>

<div class="p"><!----></div>
Change label into Category in the popup form and save and close the
form when your finished.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg18">
</a> 

<div class="p"><!----></div>
<center>Figure 18: change field properties</center>

<div class="p"><!----></div>
Click on the button Back to normal mode on top of the screen to see
the form with the new created relation and try to enter and new record.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg19">
</a> 

<div class="p"><!----></div>
<center>Figure 19: form with one-to-many dropdown list</center>

<div class="p"><!----></div>
 <h2><a name="tth_sEc8">
8</a>&nbsp;&nbsp;Assign field plugin</h2>

<div class="p"><!----></div>
One more thing configuration before our interface is ready. We will
now assign a WSYIWYG-editor to the answer field of Questions and Answers.
Click again on Edit Object Form View and then click on the edit field
icon to get the field configuration popup again. Now select the plugins
tab and then select TinyMCE from the dropdownlist

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg20">
</a> 

<div class="p"><!----></div>
<center>Figure 20: edit field properties</center>

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg21">
</a> 

<div class="p"><!----></div>
<center>Figure 21: select field plugin</center>

<div class="p"><!----></div>
You'll will now get a lot of configuration options. Just leaving these
as they are will give you result, but of course you are encouraged
to play with them. Save the form clicking on save at the bottom of
the page and close the popup. 

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg22">
</a> 

<div class="p"><!----></div>
<center>Figure 22: configure field plugin</center>

<div class="p"><!----></div>
You're form will now look as this example below.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg23">
</a> 

<div class="p"><!----></div>
<center>Figure 23: the TinyMCE plugin shown in design form view</center>

<div class="p"><!----></div>
And it will look below like this when you click on <em>Back to normal</em>.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg24">
</a> 

<div class="p"><!----></div>
<center>Figure 24: the TinyMCE plugin shown in the normal form</center>

<div class="p"><!----></div>
That's all for this tutorial. You now have a simple administration
interface for your FAQ database. When you assign access to you're
normal users they can maintain data using these navigation buttons.

<div class="p"><!----></div>

<div class="p"><!----></div>
<a name="tth_fIg25">
</a> 

<div class="p"><!----></div>
<center>Figure 25: the moderators navigation menu</center>

<div class="p"><!----></div>

<br /><br /><hr /><small>File translated from
T<sub><font size="-1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size="-1">T</font></sub>H</a>,
version 3.67.<br />On 14 Apr 2007, 03:14.</small>
</html>
